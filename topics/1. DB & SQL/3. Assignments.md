# **PROJECT ASSIGNMENTS: "TECH-SHOP" E-COMMERCE SYSTEM**

Context:  
A project to build a Backend system for the Tech-Shop e-commerce platform. You are responsible for designing and building the Database layer.

## **ASSIGNMENT 01: FOUNDATION (DESIGN & BUILD)**

*(For Session 1 & 2\)*

Duration: 8 hours  
Objectives: Design a normalized ERD and realize it into a physical Database.

### **Part 1: Architect (ERD Design)**

**Requirement:** Draw an ERD for the system with the following entities:

1. **Users:** Customers (Name, email, phone, address).  
2. **Products & Variants:**  
   * Base Product (e.g., iPhone 15).  
   * Variants (e.g., iPhone 15 \- 256GB \- Black). Price and stock are located in the variant.  
3. **Categories:** Hierarchical categories (parent-child).  
4. **Orders & OrderDetails:** Orders and purchased product details.  
5. **OrderStatus History:** Track order status change history (Audit log).

### **Part 2: Implementation (Schema Building)**

**Requirement:**

1. **DDL Script:** Write an init\_schema.sql file to create all tables.  
   * Use DECIMAL for currency.  
   * Constraints: Price \> 0, Quantity \>= 0.  
2. **Soft Delete:** Apply soft delete for the Products table (is\_deleted column).  
3. **Data Seeding:** Write a seed\_data.sql file to create sample data:  
   * Users: 50 people.  
   * Products: 20 products, each with 3 variants.  
   * **Orders:** Create 100 orders scattered over the last 3 months (Crucial for Assignment 02).

**Deliverables:**

* ERD Image file.  
* SQL Script file (Schema \+ Data).

## **ASSIGNMENT 02: OPERATION (ANALYTICS & OPTIMIZATION)**

*(For Session 3 & 4\)*

Duration: 8 hours  
Objectives: Data exploitation (Reporting) and complex business logic handling.

### **Part 1: Analytics (Data Reporting)**

**Requirement:** Write a report\_queries.sql file to solve requests from the Board of Directors:

1. **Best Sellers:** Top 5 best-selling product variants this month.  
2. **Daily Revenue:** Revenue statistics by day (Day | Order Count | Total Amount).  
3. **VIP Customers:** Find customers with total spending \> 20M AND have placed an order in the last 30 days.  
4. **Dead Stock:** Find products in stock \> 3 months that haven't sold any units.

### **Part 2: Advanced Logic (Optimization & Transaction)**

**Requirement:** Write an advanced.sql file:

1. **Order Transaction:** Write Stored Procedure sp\_CreateOrder:  
   * Input: UserId, VariantId, Quantity.  
   * Logic: Check stock \-\> Deduct stock \-\> Create Order \-\> Create OrderDetail.  
   * Mandatory use of TRANSACTION to ensure data integrity (e.g., preventing stock deduction but failing to create order).  
2. **Indexing Strategy:**  
   * Simulate a very large Orders table. The query searching for orders by OrderDate is slow.  
   * Write a command to create a suitable Index.  
   * Comment explaining why that column was chosen.

**Deliverables:**

* SQL Script file containing Report Queries.  
* SQL Script file containing Procedure and Index.